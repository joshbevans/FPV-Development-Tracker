@using FPVDevelopment.Components.Themes
@inherits LayoutComponentBase

<MudThemeProvider Theme="@AppThemes.AppTheme" @bind-IsDarkMode="_isDarkMode"/>
<MudPopoverProvider/>
<MudDialogProvider/>
<MudSnackbarProvider/>

<MudLayout>
    <MudAppBar>
        <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="DrawerToggle"/>
        FPV Development Tracker
        <MudSpacer />
        <MudIconButton OnClick="@ToggleTheme"
                       Icon="@(_isDarkMode ? Icons.Material.Filled.LightMode : Icons.Material.Filled.DarkMode)"
                       Color="Color.Inherit" />
    </MudAppBar>
    <MudDrawer ClipMode="DrawerClipMode.Docked" @bind-Open="@_drawerOpen">
        <NavMenu/>
    </MudDrawer>
    <MudMainContent>
        @Body
    </MudMainContent>
</MudLayout>

@code
{
    private bool _drawerOpen = true;
    private bool _isDarkMode = true;

    private void DrawerToggle() => _drawerOpen = !_drawerOpen;
    private void ToggleTheme() => _isDarkMode = !_isDarkMode;
}
